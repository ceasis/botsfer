# Server
server.port=${BOTSFER_PORT:8765}
# Optional local secrets file (ignored by git). Tried: working dir, project root, user home, then classpath.
spring.config.import=optional:file:./application-secrets.properties,optional:file:${user.dir}/application-secrets.properties,optional:file:${user.home}/application-secrets.properties,optional:classpath:application-secrets.properties

# Floating window - collapsed (swirling ball only)
app.window.collapsed.width=45
app.window.collapsed.height=45

# Floating window - expanded (chat UI)
app.window.expanded.width=380
app.window.expanded.height=520

# Initial position (pixels from top-left; -1 = center)
app.window.initial.x=-1
app.window.initial.y=-1

# Window behavior
app.window.always-on-top=true
app.window.hover.expand.delay-ms=150
app.window.hover.collapse.delay-ms=400

# Disable caching for development
spring.web.resources.cache.period=0
spring.web.resources.cache.cachecontrol.no-store=true
spring.web.resources.cache.cachecontrol.no-cache=true

# UI URL (relative to server; leave default)
app.ui.path=/

# ─── Platform Integrations ───────────────────────────────────────────────────
# All webhooks require public HTTPS. Use ngrok for local dev.

# Viber Bot — https://developers.viber.com/docs/api/rest-bot-api/
# Get token: Viber → More → Settings → Bots → Edit Info → Your app key.
app.viber.enabled=false
app.viber.auth-token=
app.viber.bot-name=Botsfer
app.viber.webhook-url=

# Telegram Bot — https://core.telegram.org/bots/api
# Get token: talk to @BotFather on Telegram → /newbot.
app.telegram.enabled=false
app.telegram.bot-token=
app.telegram.bot-username=BotsferBot
app.telegram.webhook-url=

# Discord Bot — https://discord.com/developers/docs/intro
# Create app at discord.com/developers/applications. Bot token under Bot tab.
# Set Interactions Endpoint URL to <your-url>/api/discord/interactions.
app.discord.enabled=false
app.discord.bot-token=
app.discord.application-id=
app.discord.public-key=
app.discord.webhook-url=

# Slack Bot — https://api.slack.com/
# Create app at api.slack.com/apps. Enable Events API → Request URL: <your-url>/api/slack/events.
app.slack.enabled=false
app.slack.bot-token=
app.slack.signing-secret=
app.slack.app-token=

# WhatsApp (Meta Cloud API) — https://developers.facebook.com/docs/whatsapp/cloud-api
# Set up in Meta Developer Portal → WhatsApp → Configuration → Callback URL: <your-url>/api/whatsapp/webhook.
app.whatsapp.enabled=false
app.whatsapp.access-token=
app.whatsapp.phone-number-id=
app.whatsapp.verify-token=

# Facebook Messenger — https://developers.facebook.com/docs/messenger-platform
# Set up in Meta Developer Portal → Messenger → Webhooks → Callback URL: <your-url>/api/messenger/webhook.
app.messenger.enabled=false
app.messenger.page-access-token=
app.messenger.verify-token=
app.messenger.app-secret=

# LINE Messaging API — https://developers.line.biz/en/docs/messaging-api/
# Create channel at LINE Developer Console. Webhook URL: <your-url>/api/line/webhook.
app.line.enabled=false
app.line.channel-access-token=
app.line.channel-secret=

# Microsoft Teams (Bot Framework) — https://learn.microsoft.com/en-us/azure/bot-service/
# Register bot in Azure Portal. Messaging endpoint: <your-url>/api/teams/messages.
app.teams.enabled=false
app.teams.app-id=
app.teams.app-password=
app.teams.tenant-id=

# WeChat Official Account — https://developers.weixin.qq.com/doc/offiaccount/en/
# Configure in WeChat Official Account admin. Server URL: <your-url>/api/wechat/webhook.
app.wechat.enabled=false
app.wechat.app-id=
app.wechat.app-secret=
app.wechat.token=
app.wechat.encoding-aes-key=

# Signal (via signal-cli-rest-api) — https://github.com/bbernhard/signal-cli-rest-api
# Requires a running signal-cli-rest-api instance. Configure webhook to: <your-url>/api/signal/webhook.
app.signal.enabled=false
app.signal.api-url=http://localhost:8080
app.signal.phone-number=

# ─── Skills ──────────────────────────────────────────────────────────────────
# Skills are portable sub-packages under com.botsfer.skills.<name>.
# Copy the skill package + these properties to add a skill to another instance.

# Disk Scan — browse and search the local file system
# Endpoints: /api/skills/diskscan/*
app.skills.diskscan.enabled=false
app.skills.diskscan.max-depth=20
app.skills.diskscan.max-results=500
# Additional paths to block (beyond built-in OS system paths):
# app.skills.diskscan.blocked-paths[0]=C:\\SensitiveFolder

# ─── Memory ──────────────────────────────────────────────────────────────────
# Persistent key-value store (files saved in the memory/ directory)
app.memory.enabled=true
app.memory.base-path=memory

# ─── Screenshots ─────────────────────────────────────────────────────────────
# Captures desktop screenshot every N seconds to ~/botsfer_data/screenshots/
app.screenshot.enabled=true
app.screenshot.interval-seconds=5
app.screenshot.max-age-days=3

# ─── Hugging Face (local ONNX models) ─────────────────────────
# Cache directory for downloaded HF models (e.g. suko/nsfw). Only ONNX image models run locally.
app.huggingface.cache-dir=${user.home}/.cache/botsfer/hf_models

# ─── Autonomous Mode ─────────────────────────────────────────────────────────
# When enabled, the bot will autonomously work on primary directives after the
# user has been idle for the configured timeout.
app.autonomous.enabled=true
app.autonomous.idle-timeout-seconds=60
app.autonomous.check-interval-ms=15000
app.autonomous.pause-between-steps-ms=30000

# ─── Email (SMTP send + IMAP read) ────────────────────────────────────────────
# SMTP — used by Spring Mail to send emails
spring.mail.host=
spring.mail.port=587
spring.mail.username=
spring.mail.password=
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
app.email.from=
# IMAP — used to read inbox
app.email.imap.host=
app.email.imap.port=993
app.email.imap.username=
app.email.imap.password=

# ─── Global Hotkeys (JNativeHook) ────────────────────────────────────────────
app.hotkeys.enabled=false

# ─── System Tray ──────────────────────────────────────────────────────────────
app.tray.enabled=true

# ─── Spring AI ────────────────────────────────────────────────────────────────
# API key: set in application-secrets.properties (project root), or use env var OPENAI_API_KEY / SPRING_AI_OPENAI_API_KEY.
# Without a key, the bot falls back to regex-based command matching.
spring.ai.openai.api-key=${OPENAI_API_KEY:${SPRING_AI_OPENAI_API_KEY:}}
spring.ai.openai.base-url=https://api.openai.com
spring.ai.openai.chat.options.model=gpt-4o-mini

# ─── Ollama (local LLMs) ──────────────────────────────────────────────────────
# Use OpenAI for chat by default; LocalModelTools switches to Ollama at runtime when requested.
# Disable Ollama auto-config so we don't get duplicate beans (LocalModelTools creates client on demand).
spring.ai.model.chat=openai
# Install Ollama via the bot ("install ollama") or manually from https://ollama.com

# Audio transcription (uses raw HTTP — shares the same API key)
app.openai.api-key=${spring.ai.openai.api-key:}
app.openai.base-url=https://api.openai.com/v1
app.openai.transcription-model=gpt-4o-mini-transcribe
